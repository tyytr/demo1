'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

exports['default'] = previewImage;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactDom = require('react-dom');

var _reactDom2 = _interopRequireDefault(_reactDom);

var _partial = require('lodash/partial');

var _partial2 = _interopRequireDefault(_partial);

var _Image = require('./Image');

var _Image2 = _interopRequireDefault(_Image);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function previewImage() {
  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var parentComponent = options.parentComponent,
      rest = (0, _objectWithoutProperties3['default'])(options, ['parentComponent']);

  var container = document.createElement('div');

  var closePreviewMask = function closePreviewMask() {
    if (!container) {
      return;
    }

    _reactDom2['default'].unmountComponentAtNode(container);
    container = undefined;
  };

  var props = (0, _extends3['default'])({}, rest, {
    onClose: closePreviewMask
  });

  // 保持context
  var render = parentComponent ? (0, _partial2['default'])(_reactDom2['default'].unstable_renderSubtreeIntoContainer, parentComponent) : _reactDom2['default'].render;

  render(_react2['default'].createElement(_Image2['default'], props), container);
}