'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.formatFileSize = formatFileSize;
exports.base64ToArrayBuffer = base64ToArrayBuffer;
var oneMB = 1024 * 1024;
var oneGB = 1024 * oneMB;

/**
 * 将文件的Byte转换为可读性更好的GB\MB\KB\B
 * @param  {number} size    大小，单位Byte
 * @param  {number} toFixed 保留几位小数，默认值为1
 * @return {string}         格式化后的字符串
 * @example
 * formatFileSize(1024) => '1 MB'
 */
function formatFileSize(size, toFixed) {
  size = +size || 0;

  if (typeof toFixed === 'undefined') {
    toFixed = 1;
  }

  if (size >= oneGB) {
    return (size / oneGB).toFixed(toFixed) + ' GB';
  } else if (size >= oneMB) {
    return (size / oneMB).toFixed(toFixed) + ' MB';
  } else if (size >= 1024) {
    return (size / 1024).toFixed(toFixed) + ' KB';
  }
  return size.toFixed(toFixed) + ' B';
}

function base64ToArrayBuffer(base64) {
  var binaryString = window.atob(base64);
  var len = binaryString.length;
  var bytes = new Uint8Array(len);
  for (var i = 0; i < len; i++) {
    bytes[i] = binaryString.charCodeAt(i);
  }
  return bytes.buffer;
}