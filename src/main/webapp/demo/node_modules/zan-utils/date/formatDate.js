(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define(['module', 'exports', 'fecha', './getValidDate', './i18n'], factory);
  } else if (typeof exports !== "undefined") {
    factory(module, exports, require('fecha'), require('./getValidDate'), require('./i18n'));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod, mod.exports, global.fecha, global.getValidDate, global.i18n);
    global.formatDate = mod.exports;
  }
})(this, function (module, exports, _fecha, _getValidDate, _i18n) {
  'use strict';

  Object.defineProperty(exports, "__esModule", {
    value: true
  });

  var _getValidDate2 = _interopRequireDefault(_getValidDate);

  var _i18n2 = _interopRequireDefault(_i18n);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
      default: obj
    };
  }

  /**
   * 格式化一个 date 对象
   * @memberof module:date
   * @param {string|Date|number} date Date 的实例
   * @param {string} mask 解析的格式，默认为 'default'
   * @param {string} locale i18n 的设置，默认为 'zh'
   * @returns {string} date 对象
   * @runkit true
   * @example
   * const formatDate = require('zan-utils/date/formatDate');
   * formatDate('2017-06-06T09:37:16.437Z');
   * // '周二 6月 06 2017 17:37:16'
   * formatDate('2017-06-06T09:37:16.437Z', 'YYYY-MM-DD');
   * // '2017-06-06'
   * formatDate(new Date(), 'YYYY-MM-DD');
   * // '2017-06-06'
   * formatDate(1496800160058, 'YYYY-MM-DD');
   * // '2017-06-07'
   */
  function formatDate(date) {
    var mask = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'default';
    var locale = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'zh';

    date = (0, _getValidDate2['default'])(date);
    return (0, _fecha.format)(date, mask, typeof locale === 'string' ? _i18n2['default'][locale] : locale);
  }
  exports['default'] = formatDate;
  module.exports = exports['default'];
});